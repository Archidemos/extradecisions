namespace = ROMRASH

character_event = {
	id = ROMRASH.1

	hide_window = yes
    is_triggered_only = yes
	
	trigger = {
		log = "ROMRASH.1 Triggered"
		FROM = {
			is_alternate_start = no
			has_landed_title = e_arabia
			has_character_flag = rashudin_invader
			religion_group = muslim
			NOT = { has_global_flag = world_middle_east_conquered_rash }
			NOT = { completely_controls_region = world_middle_east }
		}
	}
	immediate = {
		FROM = { character_event = { id = ROMRASH.2 days = 2 } }
		FROM = { character_event = { id = ROMRASH.2 days = 2 } }
		log = "ROMRASH.1 Fired"
	}
}

character_event = { #Mongols being guided to conquer Eastern Europe
	id = ROMRASH.2
	title = "Rashudin Expansion"
	desc = "Onwards to our next target in Eastern Europe"

    is_triggered_only = yes
	
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	option = {
		name = "Onwards!"
		ai_chance = { factor = 100 }
		log = "ROMRASH.2 Fired"
		random_province = {
			log = "ROMRASH.2 Option Works"
            limit = {
                has_owner = yes
                region = world_middle_east
                owner = {
                    NOR = {
                        character = ROOT
                        is_liege_or_above = ROOT
                    }
                    top_liege = {
                        reverse_has_cb = ROOT
                    }
                }
				any_neighbor_province = {
					owner = {
						OR = {
							character = ROOT
							is_liege_or_above = ROOT
						}
					}
				}
            }
			top_liege = {
				ROOT = {
					unsafe_war = {
						casus_belli = rashudin_invasion_cb
						target = PREV
						thirdparty_title = PREVPREV
						tier = KING
					}
				}
			}
		}
	}
}

#character_event = {
#	id = ROMRASH.3
#
#    is_triggered_only = yes
#	hide_window = yes
#	
#	picture = GFX_evt_mongols
#	border = GFX_event_normal_frame_war
#	
#	trigger = {
#		FROM = {
#			#ai = yes
#			OR = {
#				has_character_flag = rashudin_himself
#				has_character_flag = rashudin_invader
#			}
#			completely_controls_region = world_middle_east_arabia
#		}
#	}
#	
#	immediate = {
#		set_global_flag = world_middle_east_conquered_rash
#	}
#}

character_event = {
	id = ROMRASH.4

	hide_window = yes
    is_triggered_only = yes
	
	trigger = {
		FROM = {
			is_alternate_start = no
			has_landed_title = e_arabia
			has_character_flag = rashudin_invader
			religion_group = muslim
			NOT = { completely_controls_region = world_africa_egypt }
			NOT = { has_global_flag = world_africa_egypt_conquered_rash }
		}
		log = "ROMRASH.4 Triggered"
	}
	immediate = {
		FROM = { character_event = { id = ROMRASH.5 } }
		FROM = { character_event = { id = ROMRASH.5 } }
		log = "ROMRASH.4 Fired"
	}
}

character_event = { #Mongols being guided to conquer Eastern Europe
	id = ROMRASH.5
	title = "Rashudin Expansion"
	desc = "Onwards to our next target in Eastern Europe"

    is_triggered_only = yes
	
	picture = GFX_evt_mongols
	border = GFX_event_normal_frame_war

	option = {
		name = "Onwards!"
		log = "ROMRASH.5 Fired"
		random_province = {
			log = "ROMRASH.5 Option Works"
            limit = {
                has_owner = yes
                region = world_africa_egypt
                owner = {
                    NOR = {
                        character = ROOT
                        is_liege_or_above = ROOT
                    }
                    top_liege = {
                        reverse_has_cb = ROOT
                    }
                }
				any_neighbor_province = {
					owner = {
						OR = {
							character = ROOT
							is_liege_or_above = ROOT
						}
					}
				}
            }
			top_liege = {
				ROOT = {
					unsafe_war = {
						casus_belli = rashudin_invasion_cb
						target = PREV
						thirdparty_title = PREVPREV
						tier = KING
					}
				}
			}
		}
	}
}
#character_event = {
#	id = ROMRASH.6
#
#    is_triggered_only = yes
#	hide_window = yes
#	
#	picture = GFX_evt_mongols
#	border = GFX_event_normal_frame_war
#	
#	trigger = {
#		FROM = {
#			#ai = yes
#			has_character_flag = rashudin_invader
#			completely_controls_region = world_africa_egypt
#		}
#	}
#	
#	immediate = {
#		set_global_flag = world_africa_egypt_conquered_rash
#	}
#}