namespace = MP

narrative_event = {
	id = MP.001
	title = EVTNAMEMUG100
	desc = EVTDESCMUG100
	hide_window = yes
	hide_from = yes

	is_triggered_only = yes
	religion = catholic
	min_age = 16

	trigger = {
		NOT = { has_global_flag = crossing_penalty_added }
		start_date >= 769.1.1
		is_save_game = no
		controls_religion = yes
	}
	
	immediate = {
		set_global_flag = crossing_penalty_added
		c_guines = { location = { add_province_modifier = { name = crossing_penalty years = -1 } } }
		c_kent = { location = { add_province_modifier = { name = crossing_penalty years = -1 } } }
		c_hormuz = { location = { add_province_modifier = { name = crossing_penalty years = -1 } } }
		c_dhu_zabi = { location = { add_province_modifier = { name = crossing_penalty years = -1 } } }
		c_gotland = { location = { add_province_modifier = { name = crossing_penalty years = -1 } } }
		c_tjust = { location = { add_province_modifier = { name = crossing_penalty years = -1 } } }
		c_cinarca = { location = { add_province_modifier = { name = crossing_penalty years = -1 } } }
		c_gallura = { location = { add_province_modifier = { name = crossing_penalty years = -1 } } }
		c_messina = { location = { add_province_modifier = { name = crossing_penalty years = -1 } } }
		c_reggio = { location = { add_province_modifier = { name = crossing_penalty years = -1 } } }
		c_algeciras = { location = { add_province_modifier = { name = crossing_penalty years = -1 } } }
		c_cebta = { location = { add_province_modifier = { name = crossing_penalty years = -1 } } }
		c_tangiers = { location = { add_province_modifier = { name = crossing_penalty years = -1 } } }
		c_ulster = { location = { add_province_modifier = { name = crossing_penalty years = -1 } } }
		c_argyll = { location = { add_province_modifier = { name = crossing_penalty years = -1 } } }
		c_galloway = { location = { add_province_modifier = { name = crossing_penalty years = -1 } } }
		c_isle_of_man = { location = { add_province_modifier = { name = crossing_penalty years = -1 } } }
		c_navarra = { location = { add_province_modifier = { name = spannish_pyrenees years = -1 } } }
		c_alto_aragon = { location = { add_province_modifier = { name = spannish_pyrenees years = -1 } } }
		c_urgell = { location = { add_province_modifier = { name = spannish_pyrenees years = -1 } } }
		c_empuries = { location = { add_province_modifier = { name = spannish_pyrenees years = -1 } } }
		c_rosello = { location = { add_province_modifier = { name = spannish_pyrenees years = -1 } } }
		c_nice = { location = { add_province_modifier = { name = alph_mountain_pass years = -1 } } }
		c_piemonte = { location = { add_province_modifier = { name = alph_mountain_pass years = -1 } } }
		c_leventina = { location = { add_province_modifier = { name = alph_mountain_pass years = -1 } } }
		c_bolzano = { location = { add_province_modifier = { name = alph_mountain_pass years = -1 } } }
		c_treviso = { location = { add_province_modifier = { name = alph_mountain_pass years = -1 } } }
		c_saris = { location = { add_province_modifier = { name = north_hungarian_mountains years = -1 } } }
		c_orava = { location = { add_province_modifier = { name = north_hungarian_mountains years = -1 } } }
		c_temes = { location = { add_province_modifier = { name = north_hungarian_mountains years = -1 } } }
		c_onogost = { location = { add_province_modifier = { name = golija_mountain_pass years = -1 } } }
		c_hum = { location = { add_province_modifier = { name = golija_mountain_pass years = -1 } } }
		c_imotski = { location = { add_province_modifier = { name = golija_mountain_pass years = -1 } } }
		c_bilino_polje = { location = { add_province_modifier = { name = golija_mountain_pass years = -1 } } }
		c_travunia = { location = { add_province_modifier = { name = golija_mountain_pass years = -1 } } }
		c_usora = { location = { add_province_modifier = { name = golija_mountain_pass years = -1 } } }
		c_zeta = { location = { add_province_modifier = { name = golija_mountain_pass years = -1 } } }
		c_ochrid = { location = { add_province_modifier = { name = galicica_mountain_pass years = -1 } } }
		c_atra = { location = { add_province_modifier = { name = galicica_mountain_pass years = -1 } } }
		c_naissus = { location = { add_province_modifier = { name = vitosha_mountain_pass years = -1 } } }
		c_seres = { location = { add_province_modifier = { name = vitosha_mountain_pass years = -1 } } }
		c_strymon = { location = { add_province_modifier = { name = vitosha_mountain_pass years = -1 } } }
		c_serdica = { location = { add_province_modifier = { name = vitosha_mountain_pass years = -1 } } }
		c_tyana = { location = { add_province_modifier = { name = anatolian_plateau_pass years = -1 } } }
		c_amisos = { location = { add_province_modifier = { name = anatolian_plateau_pass years = -1 } } }
		c_selukeia = { location = { add_province_modifier = { name = anatolian_plateau_pass years = -1 } } }
		c_lykia = { location = { add_province_modifier = { name = anatolian_plateau_pass years = -1 } } }
		c_adana = { location = { add_province_modifier = { name = anatolian_plateau_pass years = -1 } } }
		c_tao = { location = { add_province_modifier = { name = iranian_plateau_pass years = -1 } } }
		c_dwin = { location = { add_province_modifier = { name = iranian_plateau_pass years = -1 } } }
		c_guria = { location = { add_province_modifier = { name = iranian_plateau_pass years = -1 } } }
		c_tabriz = { location = { add_province_modifier = { name = iranian_plateau_pass years = -1 } } }
		c_kurdistan = { location = { add_province_modifier = { name = iranian_plateau_pass years = -1 } } }
		c_zanjan_abhar = { location = { add_province_modifier = { name = iranian_plateau_pass years = -1 } } }
		c_esfahan = { location = { add_province_modifier = { name = iranian_plateau_pass years = -1 } } }
		c_hendjan = { location = { add_province_modifier = { name = iranian_plateau_pass years = -1 } } }
		c_bam = { location = { add_province_modifier = { name = iranian_plateau_pass years = -1 } } }
		c_birjand = { location = { add_province_modifier = { name = iranian_plateau_pass years = -1 } } }
		c_qazwin = { location = { add_province_modifier = { name = iranian_plateau_pass years = -1 } } }
		c_daylam = { location = { add_province_modifier = { name = iranian_plateau_pass years = -1 } } }
		c_qohistan = { location = { add_province_modifier = { name = iranian_plateau_pass years = -1 } } }
		c_sibi = { location = { add_province_modifier = { name = iranian_plateau_pass years = -1 } } }
		c_armail = { location = { add_province_modifier = { name = iranian_plateau_pass years = -1 } } }
		c_purushapura = { location = { add_province_modifier = { name = iranian_plateau_pass years = -1 } } }
		c_udabhanda = { location = { add_province_modifier = { name = iranian_plateau_pass years = -1 } } }
		c_aintab = { location = { add_province_modifier = { name = iranian_plateau_pass years = -1 } } }
		c_sistan = { location = { add_province_modifier = { name = iranian_plateau_pass years = -1 } } }
		c_nishapur = { location = { add_province_modifier = { name = iranian_plateau_pass years = -1 } } }
		c_tus = { location = { add_province_modifier = { name = iranian_plateau_pass years = -1 } } }
		c_asturias_de_oviedo = { location = { add_province_modifier = { name = picos_de_europa years = -1 } } }
		c_najera = { location = { add_province_modifier = { name = picos_de_europa years = -1 } } }
		c_soria = { location = { add_province_modifier = { name = picos_de_europa years = -1 } } }
		c_benevento = { location = { add_province_modifier = { name = cervialto_mountain_pass years = -1 } } }
		c_avellino = { location = { add_province_modifier = { name = cervialto_mountain_pass years = -1 } } }
		c_sapri = { location = { add_province_modifier = { name = cervialto_mountain_pass years = -1 } } }
		c_taranto = { location = { add_province_modifier = { name = cervialto_mountain_pass years = -1 } } }
		c_perugia = { location = { add_province_modifier = { name = cervialto_mountain_pass years = -1 } } }
		c_massaar = { location = { add_province_modifier = { name = cervialto_mountain_pass years = -1 } } }
		c_lucca = { location = { add_province_modifier = { name = cervialto_mountain_pass years = -1 } } }
		c_ankober = { location = { add_province_modifier = { name = ethiopia_highlands_pass years = -1 } } }
		c_asayita = { location = { add_province_modifier = { name = ethiopia_highlands_pass years = -1 } } }
		c_lakomelza = { location = { add_province_modifier = { name = ethiopia_highlands_pass years = -1 } } }
		c_massawa = { location = { add_province_modifier = { name = ethiopia_highlands_pass years = -1 } } }
		c_akordat = { location = { add_province_modifier = { name = ethiopia_highlands_pass years = -1 } } }
		c_sous = { location = { add_province_modifier = { name = atlas_mountain_pass years = -1 } } }
		c_muluja = { location = { add_province_modifier = { name = atlas_mountain_pass years = -1 } } }
		c_figuig = { location = { add_province_modifier = { name = atlas_mountain_pass years = -1 } } }
		c_atlas_mnt = { location = { add_province_modifier = { name = atlas_mountain_pass years = -1 } } }
		c_agder = { location = { add_province_modifier = { name = norway_mountain_pass years = -1 } } }
		c_gudbrandsdal = { location = { add_province_modifier = { name = norway_mountain_pass years = -1 } } }
		c_trondelag = { location = { add_province_modifier = { name = norway_mountain_pass years = -1 } } }
		c_finnmark = { location = { add_province_modifier = { name = norway_mountain_pass years = -1 } } }
		c_sunnlendingafjordungur = { location = { add_province_modifier = { name = norway_mountain_pass years = -1 } } }
		c_clydesdale = { location = { add_province_modifier = { name = scottish_highlands_pass years = -1 } } }
		c_lothian = { location = { add_province_modifier = { name = scottish_highlands_pass years = -1 } } }
		c_atholl = { location = { add_province_modifier = { name = scottish_highlands_pass years = -1 } } }
		c_buchan = { location = { add_province_modifier = { name = scottish_highlands_pass years = -1 } } }
		c_moray = { location = { add_province_modifier = { name = scottish_highlands_pass years = -1 } } }
		c_cumberland = { location = { add_province_modifier = { name = britania_mountain_pass years = -1 } } }
		c_northumberland = { location = { add_province_modifier = { name = britania_mountain_pass years = -1 } } }
		c_leeds = { location = { add_province_modifier = { name = britania_mountain_pass years = -1 } } }
		c_chester = { location = { add_province_modifier = { name = britania_mountain_pass years = -1 } } }
		c_perfeddwlad = { location = { add_province_modifier = { name = britania_mountain_pass years = -1 } } }
		c_gwent = { location = { add_province_modifier = { name = britania_mountain_pass years = -1 } } }
		c_bath = { location = { add_province_modifier = { name = britania_mountain_pass years = -1 } } }
		c_dorset = { location = { add_province_modifier = { name = britania_mountain_pass years = -1 } } }
		c_dublin = { location = { add_province_modifier = { name = britania_mountain_pass years = -1 } } }
		c_breifne = { location = { add_province_modifier = { name = britania_mountain_pass years = -1 } } }
		c_plzen = { location = { add_province_modifier = { name = ore_mountain_pass years = -1 } } }
		c_zatec = { location = { add_province_modifier = { name = ore_mountain_pass years = -1 } } }
		c_gorlitz = { location = { add_province_modifier = { name = ore_mountain_pass years = -1 } } }
		c_freistadt = { location = { add_province_modifier = { name = ore_mountain_pass years = -1 } } }
		c_niederbayern = { location = { add_province_modifier = { name = ore_mountain_pass years = -1 } } }
		c_bamberg = { location = { add_province_modifier = { name = ore_mountain_pass years = -1 } } }
		c_ellhofen = { location = { add_province_modifier = { name = ore_mountain_pass years = -1 } } }
		c_steteinen = { location = { add_province_modifier = { name = ore_mountain_pass years = -1 } } }
		c_zurbergen = { location = { add_province_modifier = { name = ore_mountain_pass years = -1 } } }
		c_lorraine = { location = { add_province_modifier = { name = massif_mountain_pass years = -1 } } }
		c_montbeliard = { location = { add_province_modifier = { name = massif_mountain_pass years = -1 } } }
		c_vaud = { location = { add_province_modifier = { name = massif_mountain_pass years = -1 } } }
		c_valais = { location = { add_province_modifier = { name = massif_mountain_pass years = -1 } } }
		c_vife = { location = { add_province_modifier = { name = massif_mountain_pass years = -1 } } }
		c_gevaudan = { location = { add_province_modifier = { name = massif_mountain_pass years = -1 } } }
		c_rouergue = { location = { add_province_modifier = { name = massif_mountain_pass years = -1 } } }
		c_narbonne = { location = { add_province_modifier = { name = massif_mountain_pass years = -1 } } }
		c_bourbon = { location = { add_province_modifier = { name = massif_mountain_pass years = -1 } } }
		c_artois = { location = { add_province_modifier = { name = massif_mountain_pass years = -1 } } }
		c_granada = { location = { add_province_modifier = { name = sierra_nevada_pass years = -1 } } }
		c_malaga = { location = { add_province_modifier = { name = sierra_nevada_pass years = -1 } } }
		c_almeria = { location = { add_province_modifier = { name = sierra_nevada_pass years = -1 } } }
		c_almansa = { location = { add_province_modifier = { name = sierra_nevada_pass years = -1 } } }
		c_valencia = { location = { add_province_modifier = { name = sierra_nevada_pass years = -1 } } }
		c_dariya = { location = { add_province_modifier = { name = badiyat_ash_sham_desert years = -1 } } }
	}
}

narrative_event = {
	id = MP.002
	title = EVTNAMEMUG100
	desc = EVTDESCMUG100
	hide_window = yes
	hide_from = yes
	is_triggered_only = yes
	
	religion = catholic
	min_age = 16

	trigger = {
		NOT = { has_global_flag = none_take_archi }
		start_date >= 769.1.1
		is_save_game = no
		controls_religion = yes
	}
	
	immediate = {
		set_global_flag = none_take_archi
		c_60000006 = {
			set_character_flag = no_court_invites
		}
	}
}

character_event = {
	id = MP.003

	hide_window = yes
	is_triggered_only = yes
	
	religion = catholic
	min_age = 16

	trigger = {
		NOT = { has_global_flag = laws_ar_changed }
		start_date >= 769.1.1
		is_save_game = no
		controls_religion = yes
	}
	
	immediate = {
		set_global_flag = laws_ar_changed
		any_playable_ruler = {
			limit = {
				OR = {
					holder_scope = { government = ar_theocracy_government }
					holder_scope = { government = ar_republic_government }
					holder_scope = { government = republic_government }
					holder_scope = { has_landed_title = d_papal_guards }
					holder_scope = { has_landed_title = d_scholae_palatinae }
					holder_scope = { has_landed_title = d_varangian_guard }
					holder_scope = { has_landed_title = k_orthodox }
				}
			}
			any_demesne_title = {
				limit = {
					OR = {
						holder_scope = { government = ar_theocracy_government }
						holder_scope = { government = ar_republic_government }
						holder_scope = { government = republic_government }
						holder_scope = { has_landed_title = d_papal_guards }
						holder_scope = { has_landed_title = d_scholae_palatinae }
						holder_scope = { has_landed_title = d_varangian_guard }
						holder_scope = { has_landed_title = k_orthodox }
					}
				}
				succession = succ_open_elective
				add_law = {
					law = succ_open_elective
					opinion_effect = no
				}
			}
		}
	}
}

character_event = {
	id = MP.004

	hide_window = yes
	is_triggered_only = yes
	
	religion = catholic
	min_age = 16

	trigger = {
		NOT = { has_global_flag = laws_ar_changed_2 }
		start_date >= 769.1.1
		is_save_game = no
		controls_religion = yes
	}
	
	immediate = {
		set_global_flag = laws_ar_changed_2
		any_character = {
			any_demesne_title = {
				limit = {
					holder_scope = { government = theocracy_government }
				}
				succession = succ_catholic_bishopric
				add_law = {
					law = succ_catholic_bishopric
					opinion_effect = no
				}
			}
		}
	}
}

character_event = {
    id = MP.005
    only_playable = yes
    hide_window = yes
    is_triggered_only = yes

    trigger = {
        has_landed_title = k_papal_state
    }

    immediate = {
	    if = {
		    limit = { has_landed_title = k_papal_state }
	    }
		add_trait = holy_see
		remove_spouse = spouse
		set_variable = { which = uncrowned_count value = 0 }
		add_trait = crowned_by_myself
    }
}

character_event = {
    id = MP.006
    only_playable = yes
    hide_window = yes
    is_triggered_only = yes

    trigger = {
		AND = {
			has_landed_title = k_papal_state
			has_global_flag = god_kingdom_formed
		}
    }

    immediate = {
	    if = {
		    limit = {
				AND = {
					has_landed_title = k_papal_state
					has_global_flag = god_kingdom_formed
				}
			}
	    }
		add_character_modifier = {
			name = god_kingdom_holder
			years = -1
		}
    }
}

character_event = {
	id = MP.007

	hide_window = yes
	is_triggered_only = yes
	
	religion = catholic
	min_age = 16

	trigger = {
		start_date >= 769.1.1
	}
	
	immediate = {
		any_character = {
			limit = {
				holder_scope = { government = ar_theocracy_government }
				NOT = { has_landed_title = k_papal_state }
			}
			set_character_flag = ai_flag_refuse_marriage
			set_character_flag = cannot_marry
			add_trait = monk
		}
	}
}

character_event = {
	id = MP.008

	hide_window = yes
	is_triggered_only = yes
	
	religion = catholic
	min_age = 16

	trigger = {
		start_date >= 769.1.1
		NOT = { has_global_flag = celtic_christian_set }
	}
	
	immediate = {
		set_global_flag = celtic_christian_set
		any_character = {
			limit = {
				OR = {
					has_landed_title = k_celtic_christian
					has_landed_title = k_orthodox
					has_landed_title = d_miaphysite
					has_landed_title = d_nestorian
					has_landed_title = d_manichean
					has_landed_title = d_monophysite
					has_landed_title = d_monothelite
				}
			}
			set_government_type = theocracy_government
		}
		any_demesne_title = {
			limit = {
				OR = {
					has_landed_title = k_celtic_christian
					has_landed_title = k_orthodox
					has_landed_title = d_miaphysite
					has_landed_title = d_nestorian
					has_landed_title = d_manichean
					has_landed_title = d_monophysite
					has_landed_title = d_monothelite
				}
			}
			set_government_type = theocracy_government
		}
	}
}

character_event = {
    id = MP.009
    only_playable = yes
    hide_window = yes
    is_triggered_only = yes

    trigger = {
		has_landed_title = k_papal_state
    }

    immediate = {
	    if = {
		    limit = {
				has_landed_title = k_papal_state
			}
	    }
		add_character_modifier = {
			name = papal_inheritance
			years = 2
		}
    }
}

character_event = {
	id = MP.010

	hide_window = yes
	is_triggered_only = yes
	
	religion = catholic
	min_age = 16

	trigger = {
		NOT = { has_global_flag = laws_ar_changed_3 }
		start_date >= 769.1.1
		is_save_game = no
		controls_religion = yes
	}
	
	immediate = {
		set_global_flag = laws_ar_changed_3
		any_character = {
			any_demesne_title = {
				limit = {
					holder_scope = { government = republic_government }
				}
				succession = succ_open_elective
				add_law = {
					law = succ_open_elective
					opinion_effect = no
				}
			}
		}
	}
}

##Instant Mughal Invasion Spawn

character_event = { #Character Event to delay the Province event to trigger the Mughal Invasion for Instant Game rule
	id = MP.011

	hide_window = yes
	is_triggered_only = yes
	
	only_playable = yes
	religion = catholic

	trigger = {
		has_game_rule = {
			name = mughal_invasion
			value = test
		}
		NOT = { has_global_flag = instant_invader_part_1 }
		is_save_game = no
		controls_religion = yes
	}

	
	immediate = {
		random_province = {
			limit = { has_owner = yes }
			province_event = { id = MP.012 days = 5 }
		}
		set_global_flag = instant_invader_part_1
	}
}

province_event = { #Province event that will trigger the Mughal Invasion
	id = MP.012

	hide_window = yes
	is_triggered_only = yes

	trigger = {
		NOT = { has_global_flag = instant_invader_part_2 }
	}
	
	immediate = {
		set_global_flag = instant_invader_part_2
		k_papal_state = { holder_scope = { narrative_event = { id = MUG.100 } } }
	}
}

##Instant Umayyad Invasion Spawn

character_event = { #Character Event to delay the Province event to trigger the Berber Invasion for Instant Game rule
	id = MP.013

	hide_window = yes
	is_triggered_only = yes
	
	only_playable = yes
	religion = catholic

	trigger = {
		has_game_rule = {
			name = umayyad_invasion
			value = test
		}
		NOT = { has_global_flag = berber_instant_invader_part_1 }
		is_save_game = no
		controls_religion = yes
	}

	
	immediate = {
		random_province = {
			limit = { has_owner = yes }
			province_event = { id = MP.014 days = 6 }
		}
		set_global_flag = berber_instant_invader_part_1
	}
}

province_event = { #Province event that will trigger the Berber Invasion
	id = MP.014

	hide_window = yes
	is_triggered_only = yes

	trigger = {
		NOT = { has_global_flag = berber_instant_invader_part_2 }
	}
	
	immediate = {
		set_global_flag = berber_instant_invader_part_2
		k_papal_state = { holder_scope = { narrative_event = { id = BBR.100 } } }
	}
}

##Instantly Mongol Empire Spawn

character_event = { #Character Event to delay the Province event to trigger the Mongol Invasion for Instant Game rule
	id = MP.015

	hide_window = yes
	is_triggered_only = yes
	
	only_playable = yes
	religion = catholic

	trigger = {
		has_game_rule = {
			name = mongol_invasion
			value = test
		}
		NOT = { has_global_flag = mongol_instant_invader_part_1 }
		is_save_game = no
		controls_religion = yes
	}

	
	immediate = {
		random_province = {
			limit = { has_owner = yes }
			province_event = { id = MP.016 days = 7 }
		}
		set_global_flag = mongol_instant_invader_part_1
	}
}

province_event = { #Province event that will trigger the Mongol Invasion
	id = MP.016

	hide_window = yes
	is_triggered_only = yes

	trigger = {
		NOT = { has_global_flag = mongol_instant_invader_part_2 }
	}
	
	immediate = {
		set_global_flag = mongol_instant_invader_part_2
		k_papal_state = { holder_scope = { narrative_event = { id = 60500 } } }
	}
}

##Instantly Timurid Empire Spawn

character_event = { #Character Event to delay the Province event to trigger the Timurid Invasion for Instant Game rule
	id = MP.017

	hide_window = yes
	is_triggered_only = yes
	
	only_playable = yes
	religion = catholic

	trigger = {
		has_game_rule = {
			name = timur_invasion
			value = test
		}
		NOT = { has_global_flag = timur_instant_invader_part_1 }
		is_save_game = no
		controls_religion = yes
	}

	
	immediate = {
		random_province = {
			limit = { has_owner = yes }
			province_event = { id = MP.018 days = 8 }
		}
		set_global_flag = timur_instant_invader_part_1
	}
}

province_event = { #Province event that will trigger the Timurid Invasion
	id = MP.018

	hide_window = yes
	is_triggered_only = yes

	trigger = {
		NOT = { has_global_flag = timur_instant_invader_part_2 }
	}
	
	immediate = {
		set_global_flag = timur_instant_invader_part_2
		k_papal_state = { holder_scope = { narrative_event = { id = TIME.100 } } }
	}
}

##Instantly Seljuk Empire Spawn

character_event = { #Character Event to delay the Province event to trigger the Seljuk Invasion for Instant Game rule
	id = MP.019

	hide_window = yes
	is_triggered_only = yes
	
	only_playable = yes
	religion = catholic

	trigger = {
		has_game_rule = {
			name = seljuk_invasions
			value = test
		}
		NOT = { has_global_flag = seljuk_instant_invader_part_1 }
		is_save_game = no
		controls_religion = yes
	}

	
	immediate = {
		random_province = {
			limit = { has_owner = yes }
			province_event = { id = MP.020 days = 9 }
		}
		set_global_flag = seljuk_instant_invader_part_1
	}
}

province_event = { #Province event that will trigger the Seljuk Invasion
	id = MP.020

	hide_window = yes
	is_triggered_only = yes

	trigger = {
		NOT = { has_global_flag = seljuk_instant_invader_part_2 }
	}
	
	immediate = {
		set_global_flag = seljuk_instant_invader_part_2
		k_papal_state = { holder_scope = { narrative_event = { id = SELJ.100 } } }
	}
}

##Instantly Rum Empire Spawn

character_event = { #Character Event to delay the Province event to trigger the Rum Invasion for Instant Game rule
	id = MP.021

	hide_window = yes
	is_triggered_only = yes
	
	only_playable = yes
	religion = catholic

	trigger = {
		has_game_rule = {
			name = rum_invasion
			value = test
		}
		NOT = { has_global_flag = rum_instant_invader_part_1 }
		is_save_game = no
		controls_religion = yes
	}

	
	immediate = {
		random_province = {
			limit = { has_owner = yes }
			province_event = { id = MP.022 days = 10 }
		}
		set_global_flag = rum_instant_invader_part_1
	}
}

province_event = { #Province event that will trigger the Rum Invasion
	id = MP.022

	hide_window = yes
	is_triggered_only = yes

	trigger = {
		NOT = { has_global_flag = rum_instant_invader_part_2 }
	}
	
	immediate = {
		set_global_flag = rum_instant_invader_part_2
		k_papal_state = { holder_scope = { narrative_event = { id = RUME.100 } } }
	}
}

##Instantly Golden_Horde Empire Spawn

character_event = { #Character Event to delay the Province event to trigger the Golden_Horde Invasion for Instant Game rule
	id = MP.027

	hide_window = yes
	is_triggered_only = yes
	
	only_playable = yes
	religion = catholic

	trigger = {
		has_game_rule = {
			name = gold_horde_invasion
			value = test
		}
		NOT = { has_global_flag = golden_instant_invader_part_1 }
		is_save_game = no
		controls_religion = yes
	}

	
	immediate = {
		random_province = {
			limit = { has_owner = yes }
			province_event = { id = MP.028 days = 13 }
		}
		set_global_flag = golden_instant_invader_part_1
	}
}

province_event = { #Province event that will trigger the Golden_Horde Invasion
	id = MP.028

	hide_window = yes
	is_triggered_only = yes

	trigger = {
		NOT = { has_global_flag = golden_instant_invader_part_2 }
	}
	
	immediate = {
		set_global_flag = golden_instant_invader_part_2
		k_papal_state = { holder_scope = { narrative_event = { id = GOL.100 } } }
	}
}

##Events for the Golden Horde and the Mongol Empire to not clash with eachother

character_event = { #Event for the Pope to send the Golden Horde tributary proposal to the Mongol Empire
	id = MP.029

	hide_window = yes
	is_triggered_only = yes
	
	only_playable = yes
	religion = catholic

	trigger = {
		e_mongol_empire = { holder_scope = { is_landed = yes } }
		e_golden_horde = { holder_scope = { is_landed = yes } }
		
		AND = {
			has_game_rule = {
				name = gold_horde_invasion
				value = test
			}
			has_game_rule = {
				name = mongol_invasion
				value = test
			}
		}
		
		has_global_flag = mongol_empire_arrival
		has_global_flag = golden_horde_arrival
		is_save_game = no
		controls_religion = yes
		NOT = { has_global_flag = anti_golden_mongol_clash_1 }
	}

	
	immediate = {
		set_global_flag = anti_golden_mongol_clash_1
		e_mongol_empire = { holder_scope = { narrative_event = { id = MP.030 } } }
	}
}

narrative_event = { #Event to make the Golden Horde a tributary of the Mongol Empire to avoid a clash between them
	id = MP.030
	title = MOGGOLDCLASH.100
	desc = MOGGOLDCLASHDESC.100
	
	picture = "GFX_evt_mongols"
	border = "GFX_event_narrative_frame_war"

	is_triggered_only = yes
	
	trigger = {
		NOT = { has_global_flag = anti_golden_mongol_clash_2 }
	}
	
	option = { #We will tributise the Golden Horde
		name = MOGGOLDOPT1
		ai_chance = { factor = 100 }
		if = {
			any_playable_ruler = {
				limit = { has_landed_title = e_mongol_empire  } 
			} 
			make_tributary = { who = e_golden_horde tributary_type = nomadic }
		}
		set_global_flag = anti_golden_mongol_clash_2
		hidden_effect = {
			any_player = { narrative_event = { id = MP.031 days = 5 } }
		}
	}
	
	option = { #We refuse
		name = MOGGOLDOPT2
		ai_chance = { factor = 0 }
	}
}

narrative_event = { #Event for everyone about the formation
	id = MP.031
	title = MOGGOLDCLASH.101
	desc = MOGGOLDCLASHDESC.101

	is_triggered_only = yes
	
	picture = "GFX_evt_mongols"
	border = "GFX_event_narrative_frame_war"
	
	option = {
		name = MOGGOLDOPT3
	}
}

##Instantly Ilkhanate Empire Spawn

character_event = { #Character Event to delay the Province event to trigger the Ilkhanate Invasion for Instant Game rule
	id = MP.032

	hide_window = yes
	is_triggered_only = yes
	
	only_playable = yes
	religion = catholic

	trigger = {
		has_game_rule = {
			name = ilkhanate_invasion
			value = test
		}
		NOT = { has_global_flag = ilkhanate_instant_invader_part_1 }
		is_save_game = no
		controls_religion = yes
	}

	
	immediate = {
		random_province = {
			limit = { has_owner = yes }
			province_event = { id = MP.033 days = 14 }
		}
		set_global_flag = ilkhanate_instant_invader_part_1
	}
}

province_event = { #Province event that will trigger the Ilkhanate Invasion
	id = MP.033

	hide_window = yes
	is_triggered_only = yes

	trigger = {
		NOT = { has_global_flag = ilkhanate_instant_invader_part_2 }
	}
	
	immediate = {
		set_global_flag = ilkhanate_instant_invader_part_2
		k_papal_state = { holder_scope = { narrative_event = { id = ILKH.100 } } }
	}
}

##Events for the Ilkhanate and the Mongol Empire to not clash with eachother

character_event = { #Event for the Pope to send the Golden Horde tributary proposal to the Mongol Empire
	id = MP.034

	hide_window = yes
	is_triggered_only = yes
	
	only_playable = yes
	religion = catholic

	trigger = {
		e_mongol_empire = { holder_scope = { is_landed = yes } }
		e_il-khanate = { holder_scope = { is_landed = yes } }
		
		AND = {
			has_game_rule = {
				name = ilkhanate_invasion
				value = test
			}
			has_game_rule = {
				name = mongol_invasion
				value = test
			}
		}
		
		has_global_flag = mongol_empire_arrival
		has_global_flag = ilkhanate_arrival
		is_save_game = no
		controls_religion = yes
		NOT = { has_global_flag = anti_ilkhanate_mongol_clash_1 }
	}

	
	immediate = {
		set_global_flag = anti_ilkhanate_mongol_clash_1
		e_mongol_empire = { holder_scope = { narrative_event = { id = MP.035 } } }
	}
}

narrative_event = { #Event to make the Ilkhanate a tributary of the Mongol Empire to avoid a clash between them
	id = MP.035
	title = MOGILLCLASH.100
	desc = MOGILLCLASHDESC.100
	
	picture = "GFX_evt_mongols"
	border = "GFX_event_narrative_frame_war"

	is_triggered_only = yes
	
	trigger = {
		NOT = { has_global_flag = anti_ilkhanate_mongol_clash_2 }
	}
	
	option = { #We will tributise the Golden Horde
		name = MOGGOLDOPT1
		ai_chance = { factor = 100 }
		if = {
			any_playable_ruler = {
				limit = { has_landed_title = e_mongol_empire  } 
			} 
			make_tributary = { who = e_il-khanate tributary_type = nomadic }
		}
		set_global_flag = anti_ilkhanate_mongol_clash_2
		hidden_effect = {
			any_player = { narrative_event = { id = MP.036 days = 5 } }
		}
	}
	
	option = { #We refuse
		name = MOGGOLDOPT2
		ai_chance = { factor = 0 }
	}
}

narrative_event = { #Event for everyone about the formation
	id = MP.036
	title = MOGILLCLASH.101
	desc = MOGILLCLASHDESC.101

	is_triggered_only = yes
	
	picture = "GFX_evt_mongols"
	border = "GFX_event_narrative_frame_war"
	
	option = {
		name = MOGGOLDOPT3
	}
}

character_event = {
    id = MP.037

    is_triggered_only = yes # on_new_holder(_inheritance/usurpation)
    hide_window = yes
    
    only_playable = yes

    trigger = {
        government = republic_government
        
        # Non-patrician requirements to turn into a merchant republic
        capital_scope = { is_coastal = yes }
        
        # Require at least one province and be Duke tier or higher
        higher_real_tier_than = COUNT
        num_of_count_titles >= 1
        
        # MR can't be under MR
        trigger_if = {
            limit = { independent = no }
        
            liege_before_war = {
                is_merchant_republic = no
            }
        }
    }
    
    immediate = {
        create_family_palace = yes
        set_government_type = merchant_republic_government
    }
}

character_event = {
	id = MP.038

	hide_window = yes
	is_triggered_only = yes
	
	religion = catholic
	min_age = 16

	trigger = {
		NOT = { has_global_flag = set_orthodox_free }
		start_date >= 769.1.1
		is_save_game = no
		controls_religion = yes
	}
	
	immediate = {
		set_global_flag = set_orthodox_free
		any_playable_ruler = {
			limit = {
				holder_scope = { has_landed_title = k_orthodox }
			}
			save_event_target_as = orthodox_independent
			holder_scope = {
				limit = {
					has_landed_title = k_orthodox
				}
				set_defacto_liege = event_target:orthodox_independent
			}
		}
	}
}

character_event = { #Event to Target to ask for Unrival for Multiplayer players
	id = MP.039
	desc = UNRIVALDESC.1
	picture = GFX_evt_council
	border = GFX_event_normal_frame_diplomacy
	
	is_triggered_only = yes
	
	option = { #We cool now
		name = UNRIVALOPT1
		ai_chance = { factor = 20 }
		random_rival = {
			remove_rival = FROM
		}
	}
	
	option = { #I still hate you
		name = UNRIVALOPT2
		ai_chance = { factor = 80 }
		
		FROM = { character_event = { id = MP.040 days = 3 } }
	}
}

character_event = { #Event about if the player refuses a unrival
	id = MP.040
	desc = UNRIVALDESC.2
	picture = GFX_evt_council
	border = GFX_event_normal_frame_economy
	
	is_triggered_only = yes
	
	option = { #Okay
		name = UNRIVALOPT3
		ai_chance = { factor = 100 }
	}
}